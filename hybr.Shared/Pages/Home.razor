@page "/"

@using hybr.Shared.Services
<PageTitle>Home</PageTitle>
<Grid @ref=@UpdateGrid.AllUpdateGrid["Home"] TItem="Sensor" DataProvider="UpdateGrid.DataProvider">
    <Accordion>
        @foreach (var (_key,_value) in ValueSettings.Stations)
        {
            <AccordionItem>
                <TitleTemplate>
                    <Icon Color=@ValueSettings.Stations[_key].Alert Name=@ValueSettings.Stations[_key].Icon Class="me-1" /> @_value.FullTitle
                </TitleTemplate>
                <Content>
                    @foreach (var id in _value.SensorsId)
                    {
                        <Alert Color="@SensorData.AllSensors[id].Alert"> <Icon Name="@SensorData.AllSensors[id].Icon" class="me-2"></Icon>@SensorData.AllSensors[id].Title @SensorData.AllSensors[id].Value_of_m, @SensorData.AllSensors[id].Unit_of_m</Alert>
                    }
                </Content>
            </AccordionItem>
        }
    </Accordion>
</Grid>
@code {
    //peredelat
    protected override void OnInitialized() => TimerUpdate.StartTimer();
}


@page "/"

@using hybr.Shared.Services
<PageTitle>Home</PageTitle>
<Preload />
<Grid @ref=@UpdateGrid.AllUpdateGrid["Home"] TItem="Sensor" DataProvider="DataProvider">
    <Accordion>
        <AccordionItem>
            <TitleTemplate>
                @* <div style="color: @SensorData.AllStations[1].Alert.ToIconColorClass()"> *@
                <Icon Color=@SensorData.AllStations[1].Alert Name=@SensorData.AllStations[1].Icon Class="me-1" /> Установка №1, Ветроэнергетическая установка
            </TitleTemplate>
            <Content>
                <Alert Color="@SensorData.AllSensors[1].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[1].Icon" class="me-2"></Icon>Датчик 1 @SensorData.AllSensors[1].Value_of_m, A</Alert>
                <Alert Color="@SensorData.AllSensors[2].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[2].Icon" class="me-2"></Icon>Датчик 2 @SensorData.AllSensors[2].Value_of_m, B</Alert>
                <Alert Color="@SensorData.AllSensors[3].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[3].Icon" class="me-2"></Icon>Датчик 3 @SensorData.AllSensors[3].Value_of_m, A</Alert>
                <Alert Color="@SensorData.AllSensors[4].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[4].Icon" class="me-2"></Icon>Датчик 4 @SensorData.AllSensors[4].Value_of_m, B</Alert>
                <Alert Color="@SensorData.AllSensors[5].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[5].Icon" class="me-2"></Icon>Датчик 5 @SensorData.AllSensors[5].Value_of_m, A</Alert>
                <Alert Color="@SensorData.AllSensors[6].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[6].Icon" class="me-2"></Icon>Датчик 6 @SensorData.AllSensors[6].Value_of_m, B</Alert>
                <Alert Color="@SensorData.AllSensors[7].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[7].Icon" class="me-2"></Icon>Датчик 7 @SensorData.AllSensors[7].Value_of_m, A</Alert>
                <Alert Color="@SensorData.AllSensors[8].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[8].Icon" class="me-2"></Icon>Датчик 8 @SensorData.AllSensors[8].Value_of_m, B</Alert>
                <Alert Color="@SensorData.AllSensors[9].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[9].Icon" class="me-2"></Icon>Датчик 9 @SensorData.AllSensors[9].Value_of_m, A</Alert>
                <Alert Color="@SensorData.AllSensors[10].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[10].Icon" class="me-2"></Icon>Датчик 10 @SensorData.AllSensors[10].Value_of_m, B</Alert>
                <Alert Color="@SensorData.AllSensors[11].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[11].Icon" class="me-2"></Icon>Датчик 11 @SensorData.AllSensors[11].Value_of_m, A</Alert>
                <Alert Color="@SensorData.AllSensors[12].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[12].Icon" class="me-2"></Icon>Датчик 12 @SensorData.AllSensors[12].Value_of_m, B</Alert>
            </Content>
        </AccordionItem>
        <AccordionItem>
            <TitleTemplate>
                <Icon Color=@SensorData.AllStations[2].Alert Name=@SensorData.AllStations[2].Icon Class="me-1" /> Установка №2, Фотоэнергетическая установка
            </TitleTemplate>
            <Content>
                <Alert Color="@SensorData.AllSensors[21].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[21].Icon" class="me-2"></Icon>Датчик 21 @SensorData.AllSensors[21].Value_of_m, A</Alert>
                <Alert Color="@SensorData.AllSensors[22].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[22].Icon" class="me-2"></Icon>Датчик 22 @SensorData.AllSensors[22].Value_of_m, B</Alert>
                <Alert Color="@SensorData.AllSensors[23].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[23].Icon" class="me-2"></Icon>Датчик 23 @SensorData.AllSensors[23].Value_of_m, A</Alert>
                <Alert Color="@SensorData.AllSensors[24].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[24].Icon" class="me-2"></Icon>Датчик 24 @SensorData.AllSensors[24].Value_of_m, B</Alert>
                <Alert Color="@SensorData.AllSensors[25].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[25].Icon" class="me-2"></Icon>Датчик 25 @SensorData.AllSensors[25].Value_of_m, A</Alert>
                <Alert Color="@SensorData.AllSensors[26].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[26].Icon" class="me-2"></Icon>Датчик 26 @SensorData.AllSensors[26].Value_of_m, B</Alert>
                <Alert Color="@SensorData.AllSensors[27].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[27].Icon" class="me-2"></Icon>Датчик 27 @SensorData.AllSensors[27].Value_of_m, A</Alert>
                <Alert Color="@SensorData.AllSensors[28].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[28].Icon" class="me-2"></Icon>Датчик 28 @SensorData.AllSensors[28].Value_of_m, B</Alert>
                <Alert Color="@SensorData.AllSensors[29].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[29].Icon" class="me-2"></Icon>Датчик 29 @SensorData.AllSensors[29].Value_of_m, A</Alert>
                <Alert Color="@SensorData.AllSensors[30].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[30].Icon" class="me-2"></Icon>Датчик 30 @SensorData.AllSensors[30].Value_of_m, B</Alert>
                <Alert Color="@SensorData.AllSensors[31].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[31].Icon" class="me-2"></Icon>Датчик 31 @SensorData.AllSensors[31].Value_of_m, A</Alert>
                <Alert Color="@SensorData.AllSensors[32].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[32].Icon" class="me-2"></Icon>Датчик 32 @SensorData.AllSensors[32].Value_of_m, B</Alert>

            </Content>
        </AccordionItem>
        <AccordionItem>
            <TitleTemplate>
                <Icon Color=@SensorData.AllStations[3].Alert Name=@SensorData.AllStations[3].Icon Class="me-1" /> Установка №3, Солнечный коллектор
            </TitleTemplate>
            <Content>
                <Alert Color="@SensorData.AllSensors[41].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[41].Icon" class="me-2"></Icon>Датчик 41 @SensorData.AllSensors[41].Value_of_m, </Alert>
                <Alert Color="@SensorData.AllSensors[42].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[42].Icon" class="me-2"></Icon>Датчик 42 @SensorData.AllSensors[42].Value_of_m, </Alert>
                <Alert Color="@SensorData.AllSensors[43].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[43].Icon" class="me-2"></Icon>Датчик 43 @SensorData.AllSensors[43].Value_of_m, </Alert>
                <Alert Color="@SensorData.AllSensors[44].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[44].Icon" class="me-2"></Icon>Датчик 44 @SensorData.AllSensors[44].Value_of_m, </Alert>
                <Alert Color="@SensorData.AllSensors[45].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[45].Icon" class="me-2"></Icon>Датчик 45 @SensorData.AllSensors[45].Value_of_m, </Alert>
                <Alert Color="@SensorData.AllSensors[46].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[46].Icon" class="me-2"></Icon>Датчик 46 @SensorData.AllSensors[46].Value_of_m, </Alert>
                <Alert Color="@SensorData.AllSensors[47].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[47].Icon" class="me-2"></Icon>Датчик 47 @SensorData.AllSensors[47].Value_of_m, </Alert>

            </Content>
        </AccordionItem>
        <AccordionItem>
            <TitleTemplate>
                <Icon Color=@SensorData.AllStations[4].Alert Name=@SensorData.AllStations[4].Icon Class="me-1" /> Установка №4, Солнечный концентратор
            </TitleTemplate>
            <Content>

            </Content>
        </AccordionItem>
        <AccordionItem>
            <TitleTemplate>
                <Icon Color=@SensorData.AllStations[5].Alert Name=@SensorData.AllStations[5].Icon Class="me-1" /> Установка №5, Тепловой насос
            </TitleTemplate>
            <Content>

            </Content>
        </AccordionItem>
        <AccordionItem>
            <TitleTemplate>
                <Icon Color=@SensorData.AllStations[6].Alert Name=@SensorData.AllStations[6].Icon Class="me-1" /> Установка №6, Биоустановка
            </TitleTemplate>
            <Content>

            </Content>
        </AccordionItem>
        <AccordionItem>
            <TitleTemplate>
                <Icon Color=@SensorData.AllStations[7].Alert Name=@SensorData.AllStations[7].Icon Class="me-1" /> Установка №7, Метеостанция
            </TitleTemplate>
            <Content>
                <Alert Color="@SensorData.AllSensors[103].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[103].Icon" class="me-2"></Icon>Датчик температуры воздуха @SensorData.AllSensors[103].Value_of_m, °C</Alert>
                <Alert Color="@SensorData.AllSensors[104].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[104].Icon" class="me-2"></Icon>Датчик влажности воздуха @SensorData.AllSensors[104].Value_of_m, %</Alert>
                <Alert Color="@SensorData.AllSensors[105].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[105].Icon" class="me-2"></Icon>Датчик давления @SensorData.AllSensors[105].Value_of_m, мм.рт.ст.</Alert>
                <Alert Color="@SensorData.AllSensors[106].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[106].Icon" class="me-2"></Icon>Датчик направления ветра @SensorData.AllSensors[106].Value_of_m, °</Alert>
                <Alert Color="@SensorData.AllSensors[107].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[107].Icon" class="me-2"></Icon>Датчик скорости ветра @SensorData.AllSensors[107].Value_of_m, м/с</Alert>
                <Alert Color="@SensorData.AllSensors[108].Alert" Dismissable="false"> <Icon Name="@SensorData.AllSensors[108].Icon" class="me-2"></Icon>Датчик солнечной радиации @SensorData.AllSensors[108].Value_of_m, Вт/м2</Alert>
            </Content>
        </AccordionItem>
    </Accordion>
</Grid>
<Grid   TItem="Order"
Class="table table-hover table-bordered table-striped"
DataProvider="DataProviderSQL"
AllowPaging="true"
PageSize="10">

    <GridColumns>
        <GridColumn TItem="Order" HeaderText="Id">
            @context.Id
        </GridColumn>
        <GridColumn TItem="Order" HeaderText="sensor_id">
            @context.Sensor_id
        </GridColumn>
        <GridColumn TItem="Order" HeaderText="station_id">
            @context.Station_id
        </GridColumn>
        <GridColumn TItem="Order" HeaderText="date_of_m">
            @context.Date_of_m
        </GridColumn>
        <GridColumn TItem="Order" HeaderText="time_of_m">
            @context.Time_of_m
        </GridColumn>
        <GridColumn TItem="Order" HeaderText="value_of_m">
            @context.Value_of_m
        </GridColumn>
        <GridColumn TItem="Order" HeaderText="unit_of_m">
            @context.Unit_of_m
        </GridColumn>
    </GridColumns>

</Grid>
@code {
    [Inject] protected PreloadService PreloadService { get; set; } = default!;
    private async Task<GridDataProviderResult<Order>> DataProviderSQL(GridDataProviderRequest<Order> request){
        return await Task.FromResult(request.ApplyTo(DataBase.DataAll));
    }
    private async Task<GridDataProviderResult<Sensor>> DataProvider(GridDataProviderRequest<Sensor> request)
    {
        return await Task.FromResult(request.ApplyTo(new List<Sensor>(new Sensor[1])));
    }
    protected override void OnInitialized()
    {
        //peredelat
        TimerUpdate.StartTimer();
    }
}

